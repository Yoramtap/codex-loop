{
  "project": "Ralph Loop Solidification",
  "branchName": "ralph/ralph-loop-solidification",
  "description": "Solidify the Ralph loop with real quality checks, stricter git hygiene, safer shell defaults, and fail-fast handling of Codex errors to reduce false confidence and improve reliability.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Real Quality Checks",
      "description": "As a maintainer, I want quality checks to be real so that Ralph doesn't report false success.",
      "acceptanceCriteria": [
        "Replace the no-op in ./scripts/typecheck.sh with a real command or fail with a clear message if not configured",
        "Add ./scripts/test.sh and/or ./scripts/lint.sh if relevant, or document why they are absent",
        "ralph.sh runs real checks and fails the iteration if they fail",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Git Hygiene Enforcement",
      "description": "As a maintainer, I want Ralph to enforce a clean working tree and correct branch before work so that we avoid corrupted state.",
      "acceptanceCriteria": [
        "ralph.sh checks for a clean working tree before starting an iteration",
        "ralph.sh ensures the branch from prd.json exists or is created; if it cannot, it exits with a clear error",
        "If branch creation fails (e.g., permissions), ralph.sh logs the reason and stops instead of proceeding on main",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Fail Fast on Codex Errors",
      "description": "As a maintainer, I want Ralph to stop on Codex execution errors so that failures don't cascade.",
      "acceptanceCriteria": [
        "ralph.sh detects Codex execution errors and exits immediately",
        "If Codex fails repeatedly (N times), Ralph aborts and logs the failure",
        "Error messages point to the failing command and iteration",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Safer Shell Defaults",
      "description": "As a maintainer, I want strict shell settings so that scripts fail fast on errors and unset variables.",
      "acceptanceCriteria": [
        "Add set -euo pipefail to ralph.sh",
        "Ensure any intentional non-fatal command is guarded with || true and a comment",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    }
  ]
}
